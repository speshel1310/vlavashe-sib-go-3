<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GAME</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/@supabase/supabase-js"></script>

    <!-- Yandex.Metrika counter -->
    <script type="text/javascript">
        (function (m, e, t, r, i, k, a) {
            m[i] = m[i] || function () { (m[i].a = m[i].a || []).push(arguments) };
            m[i].l = 1 * new Date();
            for (var j = 0; j < document.scripts.length; j++) { if (document.scripts[j].src === r) { return; } }
            k = e.createElement(t), a = e.getElementsByTagName(t)[0], k.async = 1, k.src = r, a.parentNode.insertBefore(k, a)
        })
            (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

        ym(105524141, "init", {
            clickmap: true,
            trackLinks: true,
            accurateTrackBounce: true,
            webvisor: true
        });
    </script>
    <noscript>
        <div><img src="https://mc.yandex.ru/watch/105435485" style="position:absolute; left:-9999px;" alt="" /></div>
    </noscript>
    <!-- /Yandex.Metrika counter -->
</head>

<body>
    <div id="auth-screen">
        <div class="auth-content">
            <h2>VLAVASHE</h2>

            <div id="pending-score-auth-message" class="hidden">
                <!-- –°–æ–æ–±—â–µ–Ω–∏–µ –æ –Ω–∞–±—Ä–∞–Ω–Ω—ã—Ö –æ—á–∫–∞—Ö –±—É–¥–µ—Ç –≤—Å—Ç–∞–≤–ª—è—Ç—å—Å—è —Å—é–¥–∞ –∏–∑ JS -->
            </div>

            <div class="game-rules">
                <p>–ü—Ä–∞–≤–∏–ª–∞ –∏–≥—Ä—ã:</p>
                <p>–°–æ–±–µ—Ä–∏ –º–∞–∫—Å–∏–º—É–º —à–∞–≤–µ—Ä–º—ã –∑–∞ 1 –º–∏–Ω—É—Ç—É. –ò–≥—Ä–∞–π —Å–∫–æ–ª—å–∫–æ —É–≥–æ–¥–Ω–æ –∏ –Ω–∞—Ö–æ–¥–∏ –≤—Å–µ –ø—Ä–æ–º–æ–∫–æ–¥—ã!</p>
                <p>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:</p>
                <p>–ü–ö: —Å—Ç—Ä–µ–ª–æ—á–∫–∏ (‚Üê ‚Üí )</p>
                <p>–°–º–∞—Ä—Ç—Ñ–æ–Ω: —Å–≤–∞–π–ø—ã/–∫–Ω–æ–ø–∫–∏</p>
            </div>

            <form id="auth-form">
                <div class="form-group form-group-hidden">
                    <label for="player-phone">–í–∞—à –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞:</label>
                    <input type="tel" id="player-phone" name="player-phone" placeholder="+7"
                        pattern="^(\+?7|8)[0-9]{10}$" title="–§–æ—Ä–º–∞—Ç –Ω–æ–º–µ—Ä–∞: 79999999999 –∏–ª–∏ +79999999999" hidden
                        disabled>
                </div>
                <button type="submit" id="start-game-btn" class="game-btn">–ù–∞—á–∞—Ç—å –∏–≥—Ä—É</button>
            </form>
        </div>
    </div>

    <div class="game-container hidden" id="game-container">
        <div class="game-header">
            <div class="score">–û—á–∫–∏: <span id="score">0</span></div>
            <div class="logo">VLAVASHE</div>
            <div class="timer">–í—Ä–µ–º—è: <span id="timer">60</span>—Å</div>
        </div>

        <div class="game-info">
            <div id="lives" class="lives-display">–ñ–∏–∑–Ω–∏: <span class="lives-count">3</span></div>
        </div>

        <div class="game-area">
            <div class="lane left"></div>
            <div class="lane center"></div>
            <div class="lane right"></div>
            <div id="player">üõµ</div>
        </div>

        <div class="controls">
            <button id="btn-left">‚Üê</button>
            <button id="btn-right">‚Üí</button>
            <div class="controls-right">
                <!-- Sound and trophy buttons will be added here by JavaScript -->
            </div>
        </div>

        <div class="game-controls">
            <button id="restart" class="game-btn">–ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ</button>
        </div>

        <div id="game-over" class="hidden">
            <div class="game-over-content">
                <h2>GAME OVER</h2>
                <p>–í—ã –Ω–∞–±—Ä–∞–ª–∏: <span id="final-score">0</span> –æ—á–∫–æ–≤</p>
                <p class="result-message"></p>

                <div id="game-over-promo-block" class="promo-code-block">
                    <p>–°–ø–∞—Å–∏–±–æ –∑–∞ –∏–≥—Ä—É, –¥–∞—Ä–∏–º –≤–∞–º –ø—Ä–æ–º–æ–∫–æ–¥ –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π –∑–∞–∫–∞–∑ –æ—Ç 750 —Ä—É–±:</p>
                    <div id="game-over-promo-list" class="promo-codes-list">
                        <!-- –ü—Ä–æ–º–æ–∫–æ–¥—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                    </div>
                    <p id="game-over-promo-copied" class="promo-copied-message hidden">–ü—Ä–æ–º–æ–∫–æ–¥ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω!</p>
                </div>

                <button id="play-again" class="game-btn">–ò–≥—Ä–∞—Ç—å —Å–Ω–æ–≤–∞</button>
                <button id="show-leaderboard-from-gameover" class="game-btn">–¢–∞–±–ª–∏—Ü–∞ —Ä–µ–∫–æ—Ä–¥–æ–≤</button>
            </div>
        </div>

        <div id="leaderboard" class="hidden">
            <div class="leaderboard-content">
                <h2>–¢–∞–±–ª–∏—Ü–∞ —Ä–µ–∫–æ—Ä–¥–æ–≤</h2>
                <div id="leaderboard-list">
                    <!-- Top players will be added here by JS -->
                </div>
                <button id="close-leaderboard" class="game-btn">–ó–∞–∫—Ä—ã—Ç—å</button>
            </div>
        </div>
    </div>
    <script src="game.js"></script>
</body>

</html>